name: Birthday Check Action
description: å®‰è£…ä¾èµ–ã€å†™é…ç½®ã€è¿è¡Œç”Ÿæ—¥æ£€æŸ¥é€»è¾‘

inputs:
  config_filename:
    description: è¦ç”Ÿæˆçš„é…ç½®æ–‡ä»¶å
    required: false
    default: config.yml

runs:
  using: "composite"
  steps:
    - name: ğŸ“¦ å®‰è£…ä¾èµ–
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
      shell: bash

    - name: ğŸ› ï¸ å¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º
      run: |
        if [[ ! -f "${{ inputs.config_filename }}" ]]; then
          echo "ğŸ“¥ æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ­£åœ¨å†™å…¥é…ç½®..."
          echo "${BIRTHDAY_YAML}" > "${{ inputs.config_filename }}"
          echo "    ${TEST_YAML}"
          echo "    ${TEST_YAML}" >> "${{ inputs.config_filename }}"
          echo "âœ… é…ç½®æ–‡ä»¶å·²åˆ›å»ºå¹¶æ›´æ–°ã€‚"
        else
          echo "âœ… é…ç½®æ–‡ä»¶å·²å­˜åœ¨ï¼Œè·³è¿‡å†™å…¥ã€‚"
        fi
      shell: bash

    - name: ğŸ•“ æ˜¾ç¤ºå½“å‰æ—¶é—´
      run: date
      shell: bash

    - name: ğŸ“„ æ˜¾ç¤ºé…ç½®å†…å®¹
      run: cat "${{ inputs.config_filename }}"
      shell: bash

    - name: ğŸ‰ æ‰§è¡Œç”Ÿæ—¥æ£€æŸ¥
      run: python -m src.main run
      shell: bash
